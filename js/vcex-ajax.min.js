!function(){let e=!1;document.querySelector("body").classList.contains("logged-in");const t=(e,t=10)=>{let a=null;return(...r)=>{window.clearTimeout(a),a=window.setTimeout((()=>{e.apply(null,r)}),t)}},a=()=>parseInt(vcex_ajax_params.session_storage),r=e=>JSON.stringify(e),n=(e,t)=>{null===localStorage.getItem(e)&&sessionStorage.setItem(e,JSON.stringify(t))},c=e=>{const t=sessionStorage.getItem(e);if(t)return JSON.parse(t)},o=()=>{window.dispatchEvent(new CustomEvent("vcexAfterAjaxSuccess"))},s=(e,t,o,s=!0)=>{a()||(s=!1);let i="",l="";if(s&&(t.hasOwnProperty("entry_count")&&delete t.entry_count,t.hasOwnProperty("running_count")&&delete t.running_count,t.hasOwnProperty("paged")&&1===t.paged&&delete t.paged,i=r(t),l=c(i)),l)return new Promise(((e,t)=>{setTimeout((()=>{e(l)}),50)}));{const a=new FormData;return a.append("action","vcex_ajax_action"),a.append("nonce",vcex_ajax_params.nonce),a.append("shortcodeClass",e),a.append("shortcodeAtts",JSON.stringify(t)),o&&a.append("data",JSON.stringify(o)),fetch(vcex_ajax_params.ajax_url,{method:"POST",credentials:"same-origin",body:a}).then((e=>e.json())).then((e=>(s&&n(i,e.data),e.data))).catch((e=>{console.log("[TotalTheme Core Load More]"),console.error(e)}))}},i=e=>{const t=e.id;if(!t)return;let a=e.getAttribute("data-vcex-filter-selection");if(!a)return;a=JSON.parse(a);const r={selection:a},n=document.querySelector(`[data-vcex-ajax-filter-target="${t}"]`);if(!n)return r;if(n.getAttribute("data-vcex-ajax-filter-multiple")){r.multiple=1;const e=n.getAttribute("data-vcex-ajax-filter-relation");e&&(r.relation=e);const t=n.getAttribute("data-vcex-ajax-filter-meta-relation");t&&(r.meta_relation=t)}const c=n.getAttribute("data-vcex-ajax-filter-ignore-tax-query");return c&&(r.ignore_tax_query=c),r},l=()=>"function"==typeof jQuery,d=()=>{"function"==typeof VcWaypoint&&VcWaypoint.refreshAll(),"function"==typeof Waypoint&&Waypoint.refreshAll()},u=e=>{"function"==typeof window.vc_rowBehaviour&&setTimeout(window.vc_rowBehaviour),"object"==typeof wpex&&"function"==typeof wpex.equalHeights&&wpex.equalHeights(e),"object"==typeof wpex&&"function"==typeof wpex.hoverStyles&&wpex.hoverStyles(),"function"==typeof vc_waypoints?vc_waypoints():e.querySelectorAll(".wpb_animate_when_almost_visible").forEach((e=>{e.classList.add("wpb_start_animation animated")})),"function"==typeof wpexIsotope&&e.querySelector(".wpex-masonry-grid")&&wpexIsotope(e),"function"==typeof vcexIsotopeGrids&&e.querySelector(".vcex-isotope-grid")&&vcexIsotopeGrids(e),l()&&("function"==typeof window.wpexSliderPro&&window.wpexSliderPro(jQuery(e)),e.classList.contains("justified-gallery")&&void 0!==jQuery.fn.justifiedGallery&&jQuery.justifiedGallery("norewind"),void 0!==jQuery.fn.mediaelementplayer&&jQuery(e).find("audio, video").mediaelementplayer(),"function"==typeof window.vcexCarousels&&vcexCarousels(e))},x=(e,t)=>new Promise(((a,r)=>{const n=t.querySelector("[data-vcex-class]");if(!n)return r(new Error("[TotalTheme Core data-vcex-class not found]"));const c=()=>{e.innerHTML=n.innerHTML,u(e),"function"==typeof vcexNavbarFilterLinks&&vcexNavbarFilterLinks(),d(),a(e)};if(!!("1"!==vcex_ajax_params.wait_for_images&&!e.querySelector(".wpex-masonry-col"))||"function"!=typeof imagesLoaded)return c();imagesLoaded(t,(function(e){return c()}))})),v=(e,t)=>new Promise(((a,r)=>{const n=!("1"!==vcex_ajax_params.wait_for_images&&!e.querySelector(".wpex-masonry-col")),c=()=>{if(t.forEach((t=>{t.classList.contains("sticky")&&t.classList.add("vcex-duplicate"),e.appendChild(t)})),u(e),(e=>{if(e&&"function"==typeof Isotope)return!!(e.classList.contains("vcex-isotope-grid")||e.classList.contains("vcex-navbar-filter-grid")||e.classList.contains("wpex-masonry-grid"))||void 0})(e)){var r=Isotope.data(e);r&&(r.appended(t),r.layout())}d(),a(t)};if(!n||"function"!=typeof imagesLoaded)return c();imagesLoaded(t,(function(e){return c()}))}));"function"!=typeof window.vcexAjaxFilter&&(window.vcexAjaxFilter=function(l){l&&l.childNodes||(l=document);const d=e=>e.closest("[data-vcex-ajax-filter]"),u=e=>e.getAttribute("data-vcex-type"),v=e=>e.getAttribute("data-vcex-value"),p=e=>e.getAttribute("data-vcex-ajax-filter-target"),f=e=>{const t=p(e);if(t){const e=t.replace("#","");return document.querySelector(`#${e}`)}},y=e=>{const t=f(e);if(t){const e=t.getAttribute("data-vcex-filter-selection");return e&&void 0!==e?JSON.parse(e):""}},g=e=>{const t=p(e);let a={};document.querySelectorAll(`[data-vcex-ajax-filter-target="${t}"] [data-vcex-type][data-vcex-selected="1"]`).forEach((e=>{const t=v(e),r=u(e);let n="",c=r;if(t&&!j(e)){switch(r){case"search":case"order":case"orderby":n=t;break;case"meta":const o=e.getAttribute("data-vcex-key");if(o){c=o;const a=[`${t}`],r=(e=>{const t=u(e);if("search"!==t&&"order"!==t&&"orderby"!==t)return e.getAttribute("data-vcex-operator")||e.getAttribute("data-vcex-meta-compare")||null})(e);r&&a.push(`${r}`);const s=e.getAttribute("data-vcex-meta-type");s&&a.push(`${s}`),n=a.join("|")}break;default:if(a.hasOwnProperty(r)){n=`${a[r]},${t}`}else n=t}n&&(a[c]=n)}})),a=JSON.stringify(a).trim(),a&&"{}"!==a||document.querySelectorAll(`[data-vcex-ajax-filter-target="${t}"] [data-vcex-type="all"]`).forEach((e=>{w(e)})),f(e).setAttribute("data-vcex-filter-selection",a)},m=e=>{const t=p(e);document.querySelectorAll(`[data-vcex-ajax-filter-target="${t}"]`).forEach((e=>{e.classList.add("wpex-pointer-events-none")}))},b=e=>{const t=p(e);document.querySelectorAll(`[data-vcex-ajax-filter-target="${t}"]`).forEach((e=>{e.classList.remove("wpex-pointer-events-none")}))},w=e=>{"reset"!==u(e)&&(e.classList.add("active"),e.setAttribute("data-vcex-selected","1"),!j(e)&&L(d(e))||e.classList.add("wpex-pointer-events-none"))},A=e=>{e.classList.remove("active","wpex-pointer-events-none"),e.removeAttribute("data-vcex-selected");switch(e.tagName.toLowerCase()){case"select":e.removeAttribute("data-vcex-value"),e.selectedIndex=0;break;case"input":switch(e.getAttribute("type")){case"checkbox":e.checked=!1;break;case"range":e.removeAttribute("data-vcex-value");break;default:e.value="",e.removeAttribute("data-vcex-value")}}},h=e=>{const t=p(e);t&&(document.querySelectorAll(`[data-vcex-ajax-filter-target="${t}"] [data-vcex-type]`).forEach((e=>{"all"===u(e)?w(e):A(e)})),document.querySelectorAll(`[data-vcex-ajax-filter-target="${t}"] input:not([data-vcex-type])`).forEach((e=>{switch(e.getAttribute("type")){case"checkbox":e.checked=!1;break;case"select":e.selectedIndex=0;break;default:e.value=""}})),(e=>{f(e).removeAttribute("data-vcex-filter-selection")})(e))},j=e=>{const t=v(e),a=u(e);return"reset"===a||"all"===a||"all"===t},S=e=>j(e)?!(!e.classList.contains("active")&&"1"!==e.getAttribute("data-vcex-selected")&&!(e=>{const t=y(e);if(!t)return!0;const a=JSON.stringify(t);return"{}"===a||"[]"===a})(d(e))):e.getAttribute("data-vcex-selected"),L=e=>parseInt(e.getAttribute("data-vcex-ajax-filter-multiple")),_=e=>{const t={},a=p(e);return document.querySelectorAll(`[data-vcex-ajax-filter-target="${a}"] .vcex-ajax-filter-count`).forEach((e=>{const a=e.closest("[data-vcex-type]"),r=u(a);if(!r||!a||"all"===r)return;const n=v(a);r in t?t[r].push(n):t[r]=[n]})),t},q=(e,t)=>{if(!t||void 0===t)return;"object"!=typeof t&&(t=JSON.parse(t));const a=e.querySelectorAll(".vcex-ajax-filter-count");if(a)if("empty"===t||"0"===t)a.forEach((e=>{const t=e.closest("[data-vcex-type]");j(t)||(e.textContent="(0)",S(t)||(t.classList.add("wpex-pointer-events-none"),t.setAttribute("disabled","")))}));else for(let[e,a]of Object.entries(t))if("all"===e)document.querySelectorAll('[data-vcex-type="all"] .vcex-ajax-filter-count').forEach((e=>{e.textContent=`(${a})`}));else{const t=e.split("|"),r=t[0],n=t[1];document.querySelectorAll(`[data-vcex-type="${r}"][data-vcex-value="${n}"] .vcex-ajax-filter-count`).forEach((e=>{e.textContent=`(${a})`;const t=e.closest("[data-vcex-type]");S(t)||(a&&"0"!==a?(t.classList.remove("wpex-pointer-events-none"),t.removeAttribute("disabled")):(t.classList.add("wpex-pointer-events-none"),t.setAttribute("disabled","")))}))}},E=t=>{const a=u(t);if(!a)return;const r=v(t),n=t.closest("[data-vcex-ajax-filter]"),c=p(n),l=f(n);if(!l)return;const d={},y=L(n),E=j(t);if(E&&S(t))return;const k=l.getAttribute("data-vcex-class"),O=JSON.parse(l.getAttribute("data-vcex-atts"));if(!k||!O)return;const I=n.classList.contains("vcex-navbar");var N;O.ajax_filter={},E?(I?((N=n).querySelectorAll("[data-vcex-type]").forEach((e=>{"all"===u(e)?w(e):A(e)})),N.querySelectorAll("input:not([data-vcex-type])").forEach((e=>{switch(e.getAttribute("type")){case"checkbox":e.checked=!1;break;case"select":e.selectedIndex=0;break;default:e.value=""}})),g(N)):h(n),w(t),l.setAttribute("data-vcex-current-page","1")):("submit"!==a&&(r?y&&S(t)&&(e=>{const t=e.tagName.toLowerCase();if("button"===t||"a"===t||"div"===t||"span"===t)return!0})(t)?A(t):w(t):A(t),I?n.querySelectorAll("[data-vcex-type]").forEach((e=>{j(e)&&A(e)})):document.querySelectorAll(`[data-vcex-ajax-filter-target="${c}"] [data-vcex-type]`).forEach((e=>{j(e)&&A(e)})),n.querySelectorAll("[data-vcex-type]").forEach((e=>{e.isSameNode(t)||y||A(e)}))),g(n),O.ajax_filter=i(l)),n.querySelector('[data-vcex-type="submit"')&&"submit"!==a&&"reset"!==a||(O.ajax_action="filter",(t=>{e=!0;let a=t.classList.contains("wpex-post-cards")?"wpex-post-cards--loading":"vcex-ajax-loading";t.classList.add(a);const r=t.querySelector(".vcex-ajax-loader");r&&(r.style.display="flex")})(l),m(n),n.setAttribute("data-vcex-ajax-filter-loading",""),n.dataset.vcexAjaxFilterUpdateCounts&&document.querySelector(`[data-vcex-ajax-filter-target="${c}"] .vcex-ajax-filter-count`)&&(d.update_counts="1",d.filter=_(n)),s(k,O,d).then((t=>{t.counts&&q(n,t.counts),t.html&&((t,a)=>{const r=(new DOMParser).parseFromString(t,"text/html");r&&x(a,r).then((t=>{e=!1;const n=r.querySelector("[data-vcex-atts]"),c=a.classList.contains("wpex-post-cards")?"wpex-post-cards--loading":"vcex-ajax-loading";a.setAttribute("data-vcex-atts",n.getAttribute("data-vcex-atts")),a.setAttribute("data-vcex-current-page","1"),a.setAttribute("data-vcex-max-pages",n.getAttribute("data-vcex-max-pages")),a.classList.remove(c);const s=a.querySelector(".vcex-ajax-loader");s&&(s.style.display="none"),o()}))})(t.html,l),b(n),n.removeAttribute("data-vcex-ajax-filter-loading")})))},k=t=>{if(e)return;const a=t.target;if(!a.getAttribute("data-vcex-type"))return;const r=a.closest('select, input[type="checkbox"], input[type="hidden"], input[type="range"]');if(!r)return;t.preventDefault();switch(r.getAttribute("type")){case"hidden":break;case"checkbox":r.getAttribute("data-vcex-selected")?r.removeAttribute("data-vcex-value"):r.setAttribute("data-vcex-value",r.value);break;default:const e=r.value;e&&"all"!==e?r.setAttribute("data-vcex-value",e):r.removeAttribute("data-vcex-value")}E(r)},O=t((t=>{if(e||t.key.includes("F5","TAB","SHIFT","ESC"))return;const a=t.target.closest("input[data-vcex-type]");if(!a)return;const r=a.getAttribute("type");if(!a||"checkbox"===r||"range"===r)return;t.preventDefault();const n=a.value;n?a.setAttribute("data-vcex-value",n):a.removeAttribute("data-vcex-value"),E(a)}),500);(()=>{document.querySelectorAll("[data-vcex-ajax-filter]").forEach((e=>{let t,o=f(e);if(!o)return;const i=o.getAttribute("data-vcex-class"),l=JSON.parse(o.getAttribute("data-vcex-atts"));if(l.ajax_filter={},l.ajax_action="filter",!l||!i)return;a()&&(l.hasOwnProperty("entry_count")&&delete l.entry_count,l.hasOwnProperty("running_count")&&delete l.running_count,t=r(l));const d=()=>{const a=c(t);a&&"undefined"!==a||(data={html:o.outerHTML},e.dataset.vcexAjaxFilterSetCounts&&(data.counts=(e=>{const t={};return e.querySelectorAll("[data-vcex-type] .vcex-ajax-filter-count").forEach((e=>{const a=e.closest("[data-vcex-type]"),r=u(a);if(!r)return;const n=r+"|"+v(a),c=e.innerText;t[n]=c.replace(/\D/g,"")})),t})(e)),n(t,data))};if(e.dataset.vcexAjaxFilterSetCounts){let r=a()?c("counts__"+t):"";const o={return:"sort_counts",update_counts:"1",filter:_(e)};e.dataset.vcexAjaxFilterIgnoreTaxQuery&&(o.ignore_tax_query=e.dataset.vcexAjaxFilterIgnoreTaxQuery),r?(q(e,r),d()):(m(e),s(i,l,o,!1).then((r=>{q(e,r.counts),a()&&(n("counts__"+t,r.counts),d()),b(e)})))}else d()}));const e=window.location.search;let t=new URLSearchParams(e).get("filter");if(!t)return;const o=document.querySelector(`[data-vcex-ajax-filter] [data-vcex-name="${t}"]`);o&&E(o)})(),document.addEventListener("click",(t=>{if(e)return;const a=t.target.closest("a[data-vcex-type],button[data-vcex-type]");a&&(t.preventDefault(),E(a))})),document.addEventListener("change",k),window.addEventListener("keyup",O),document.querySelectorAll('input[data-vcex-type][type="hidden"]').forEach((e=>{e.addEventListener("change",k)}))}),"function"!=typeof window.vcexAjaxPagination&&(window.vcexAjaxPagination=function(t){t&&t.childNodes||(t=document);a()&&document.querySelectorAll('[data-vcex-pagination="numbered_ajax"]').forEach((e=>{const t=JSON.parse(e.getAttribute("data-vcex-atts"));t&&(t.ajax_action="pagination",t.hasOwnProperty("entry_count")&&delete t.entry_count,t.hasOwnProperty("running_count")&&delete t.running_count,n(r(t),{html:e.outerHTML}))})),document.addEventListener("click",(t=>{const a=t.target.closest('[data-vcex-pagination="numbered_ajax"] a.page-numbers');if(!a)return;if(t.preventDefault(),e)return;const r=a.closest('[data-vcex-pagination="numbered_ajax"]');if(!r.querySelector(".wpex-pagination"))return;const n=r.getAttribute("data-vcex-class");r.querySelector(".wpex-post-cards-list, .wpex-post-cards-grid, .wpex-post-cards-flex");let c=JSON.parse(r.getAttribute("data-vcex-atts")),l=parseInt(r.getAttribute("data-vcex-current-page")),d=r.classList.contains("wpex-post-cards")?"wpex-post-cards--loading":"vcex-ajax-loading";a.classList.contains("next")?l+=1:a.classList.contains("prev")?l-=1:l=parseInt(a.innerText.replace(/\D/g,"")),c.paged=l,r.setAttribute("data-vcex-current-page",l),e=!0,r.classList.add(d);const u=r.querySelector(".vcex-ajax-loader");u&&(u.style.display="flex"),c.ajax_action="pagination";const v=i(r);v&&(c.ajax_filter=v),s(n,c).then((t=>{t.html&&(t=>{const a=(new DOMParser).parseFromString(t,"text/html");a&&x(r,a).then((t=>{c=JSON.parse(a.querySelector("[data-vcex-atts]").getAttribute("data-vcex-atts")),e=!1,r.classList.remove(d);const n=r.querySelector(".vcex-ajax-loader");n&&(n.style.display="none"),o()}))})(t.html)}))}))}),"function"!=typeof window.vcexAjaxLoadmore&&(window.vcexAjaxLoadmore=function(t){t&&t.childNodes||(t=document);document.addEventListener("click",(t=>{if(button=t.target.closest(".vcex-loadmore-button"),!button)return;if(t.preventDefault(),e)return;const a=button.closest(".vcex-loadmore");if(!a)return;const r=a.closest("[data-vcex-class]");if(!r)return;const n=r.querySelector(".wpex-post-cards-loop");if(!n)return;const c=a.querySelector(".vcex-loadmore-spinner");let d=parseInt(r.getAttribute("data-vcex-current-page"))+1,u=JSON.parse(r.getAttribute("data-vcex-atts")),x=!1;const p=r.getAttribute("data-vcex-class"),f=parseInt(r.getAttribute("data-vcex-max-pages")),y=button.querySelector(".vcex-txt"),g=button.dataset.text,m=button.dataset.loadingText,b=button.dataset.failedText,w=parseInt(button.dataset.infiniteScroll);w||(a.style.minHeight=a.offsetHeight+"px"),e=!0,u.paged=d,w&&a.classList.remove("wpex-invisible"),button.classList.add("wpex-hidden"),a.classList.add("vcex-loading"),y.innerText=m,c&&(w?(c.classList.add("wpex-inline-block"),c.classList.remove("wpex-invisible","wpex-opacity-0")):(c.classList.remove("wpex-hidden"),c.classList.add("wpex-inline-block"))),x=!0,u.ajax_action="load_more";const A=i(r);A&&(u.ajax_filter=A),s(p,u).then((t=>{t.html?(t=>{const s=(new DOMParser).parseFromString(t,"text/html"),i=s.querySelectorAll(".wpex-post-cards-entry, .wpex-card-list-divider");i&&(r.setAttribute("data-vcex-current-page",d),v(n,i).then((t=>{if(l()&&jQuery(n).trigger("vcexAjaxLoadmoreFinished",[jQuery(i)]),u=JSON.parse(s.querySelector("[data-vcex-atts]").getAttribute("data-vcex-atts")),w&&a.classList.add("wpex-invisible"),button.classList.remove("wpex-hidden"),a.classList.remove("vcex-loading"),y.innerText=g,c&&(w?(c.classList.remove("wpex-inline-block"),c.classList.add("wpex-invisible","wpex-opacity-0")):(c.classList.add("wpex-hidden"),c.classList.remove("wpex-inline-block"))),!w&&x){const e=t[0].querySelector("a");e&&e.focus({preventScroll:!0,focusVisible:!1})}d===f&&(a.style.display="none",button.setAttribute("aria-disabled","true")),e=!1,o()})))})(t.html):y.innerText=b}))}))}),"function"!=typeof window.vcexAjaxInfiniteScroll&&(window.vcexAjaxInfiniteScroll=function(){let e=0;if(!document.querySelector(".vcex-loadmore--infinite-scroll .vcex-loadmore-button"))return;const a=t((t=>{let a=window.scrollY;a>e&&document.querySelectorAll(".vcex-loadmore--infinite-scroll .vcex-loadmore-button").forEach((e=>{var t,a;"true"!==e.getAttribute("aria-disabled")&&(t=e.getBoundingClientRect(),a=document.documentElement,t.bottom<=(window.innerHeight||a.clientHeight)&&t.right<=(window.innerWidth||a.clientWidth))&&e.click()})),e=a}),10);window.addEventListener("scroll",a)});const p=()=>{vcexAjaxFilter()};"interactive"===document.readyState||"complete"===document.readyState?setTimeout(p,0):document.addEventListener("DOMContentLoaded",p,!1),window.addEventListener("load",(()=>{vcexAjaxInfiniteScroll(),vcexAjaxPagination(),vcexAjaxLoadmore()}))}();